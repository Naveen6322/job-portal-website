{% extends "base.html" %}

{% block content %}


<!DOCTYPE html>
<html>
<head>
    <title>Job Applications</title>
</head>
<body>

<h2>Applications for "{{ job.title }}"</h2>
<h2>Applicants for "{{ job.title }}"</h2>

{% for app in applications %}
    <div style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
        <p><strong>{{ app.applicant.email }}</strong></p>
        <p>Status: {{ app.status }}</p>

        {% if app.status == "pending" %}
            <a href="{% url 'jobs:accept_application' app.id %}">✅ Accept</a>
            |
            <a href="{% url 'jobs:reject_application' app.id %}">❌ Reject</a>
        {% endif %}
    </div>
{% empty %}
    <p>No applications yet.</p>
{% endfor %}

<a href="{% url 'jobs:dashboard' %}">⬅ Back</a>


<a href="{% url 'jobs:dashboard' %}">⬅ Back to Dashboard</a>
<br><br>

{% if applications %}
    <table border="1" cellpadding="10">
        <tr>
            <th>Candidate</th>
            <th>Email</th>
            <th>Applied At</th>
        </tr>

        {% for application in applications %}
            <tr>
                <td>{{ application.applicant.email }}</td>
                <td>{{ application.applicant.email }}</td>
                <td>{{ application.applied_at }}</td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    <p>No applications yet.</p>
    {% for app in applications %}
<tr>
    <td>{{ app.applicant.email }}</td>
    <td>{{ app.applied_at }}</td>
    <td>
        {% if app.status == "pending" %}
            <a href="{% url 'jobs:update_application_status' app.id 'accepted' %}">✅ Accept</a>
            |
            <a href="{% url 'jobs:update_application_status' app.id 'rejected' %}">❌ Reject</a>
        {% elif app.status == "accepted" %}
            ✅ Accepted
        {% else %}
            ❌ Rejected
        {% endif %}
    </td>
</tr>
{% endfor %}

{% endif %}


</body>
</html>

{% endblock %}
